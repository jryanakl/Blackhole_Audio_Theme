<div class="bh-main__page">
  <section class="bh-main__page__section">
    <cart-items class="gradient isolate{% if cart == empty %} is-empty{% else %} section-{{ section.id }}-padding{% endif %}">

      <div class="w-auto flex flex-row justify-between">
        <div>
          <h2 >{{ 'sections.cart.title' | t }}</h2>
        </div>
        <div>
          <h3 class="hidden">
            Cart Empty
          </h3>
          {% comment %} <a class="text-base text-uppercase" href="{{ routes.all_products_collection_url }}"> {% endcomment %}
          <a href="/products/m87-amplifier">
            {{ 'general.continue_shopping' | t }}
          </a>
        </div>
      </div>
      
      <form action="{{ routes.cart_url }}" class="" method="post" id="cart">
        <div class="" id="">
          <div class="mt-10">
            {% if cart != empty %}
              <table class="w-full">
                <thead class="table-auto border-b border-solid border-gray-300 text-left uppercase text-xs text-gray-500 font-thin">
                  <tr class="">
                    <th class="py-5" colspan="2" scope="col">
                      {{ 'sections.cart.headings.product' | t }}
                    </th>
                    <th class="" colspan="1" scope="col">
                      {{ 'sections.cart.headings.quantity' | t }}
                    </th>
                    <th class="" colspan="1" scope="col">
                      {{ 'sections.cart.headings.total' | t }}
                    </th>
                  </tr>
                </thead>

                <tbody class="border-bottom">
                  {% for item in cart.items %}
                    <tr class="py-5" id="">
                      <td class="bg-gray-100 p-3 max-w-24">
                        {% if item.image %}
                          <a href="{{ item.url }}" class=""> </a>
                          <div class="flex align-middle">
                            <img
                              src="{{ item.image | image_url: width: 300 }}"
                              class=""
                              alt="{{ item.image.alt | escape }}"
                              loading="lazy"
                              width="150"
                              height="{{ 150 | divided_by: item.image.aspect_ratio | ceil }}"
                            >
                          </div>
                        {% endif %}
                      </td>

                      <td class="p-3 max-w-22">
                        {% if settings.show_vendor -%}
                          <p class="">{{ item.product.vendor }}</p>
                        {% endif %}

                        <a href="{{ item.url }}" class="">{{ item.product.title | escape }}</a>

                        {% if item.original_price != item.final_price %}
                          <div class="">
                            <span class="">
                              {{ 'products.product.price.regular_price' | t }}
                            </span>
                            <s class="">
                              {{- item.original_price | money -}}
                            </s>
                            <span class="">
                              {{ 'products.product.price.sale_price' | t }}
                            </span>
                            <strong class="">
                              {{ item.final_price | money }}
                            </strong>
                          </div>
                        {% else %}
                          <div class="">
                            {{ item.original_price | money }}
                          </div>
                        {% endif %}

                        {% if item.product.has_only_default_variant == false
                          or item.properties.size != 0
                          or item.selling_plan_allocation != null
                        %}
                          <dl>
                            {% if item.product.has_only_default_variant == false %}
                              {% for option in item.options_with_values %}
                                <div class="">
                                  <dt>{{ option.name }}:</dt>
                                  <dd>{{ option.value }}</dd>
                                </div>
                              {% endfor %}
                            {% endif %}

                            {% for property in item.properties %}
                              {% assign property_first_char = property.first | slice: 0 %}
                              {% if property.last != blank and property_first_char != '_' %}
                                <div class="">
                                  <dt>{{ property.first }}:</dt>
                                  <dd>
                                    {%- if property.last contains '/uploads/' -%}
                                      <a href="{{ property.last }}" class="link" target="_blank">
                                        {{ property.last | split: '/' | last }}
                                      </a>
                                    {% else %}
                                      {{ property.last }}
                                    {% endif %}
                                  </dd>
                                </div>
                              {% endif %}
                            {% endfor %}
                          </dl>

                          <p class="">
                            {{ item.selling_plan_allocation.selling_plan.name }}
                          </p>
                        {% endif %}

                        {% comment %}
                          <ul class="list-disc">
                            {% for discount in item.line_level_discount_allocations %}
                              <li class="">
                                <span>{% comment %} {% render 'icon-discount' %} {% endcomment %}</span>
                                <span>{{ discount.discount_application.title }}</span>
                              </li>
                            {% endfor %}
                          </ul>
                        {% endcomment %}
                      </td>


                      {% liquid
                        assign has_qty_rules = false
                        if item.variant.quantity_rule.increment > 1 or item.variant.quantity_rule.min > 1 or item.variant.quantity_rule.max != null
                          assign has_qty_rules = true
                        endif

                        assign has_vol_pricing = false
                        if item.variant.quantity_price_breaks.size > 0
                          assign has_vol_pricing = true
                        endif
                      %}
                      <td class="w-300">
                        <!-- @todo: Quantity -->
                        <quantity-popover>
                          <div class="w-auto">
                            <label class="bh-label text-sm" for="quantity-{{ item.index | plus: 1 }}">
                              {{ 'products.product.quantity.label' | t }}
                            </label>
                            <div class="flex flex-row items-center justify-items-start">
                              {% if has_qty_rules or has_vol_pricing %}
                                <button class="bh-button bh-button--sm bh-button--white border-bg-gray-700" type="button">
                                  <span class="bh-icon bh-icon--black">{% render 'icon-info' %}</span>
                                </button>
                              {% endif %}
                              <quantity-input class="border border-gray-100" data-url="{{ product.url }}" data-section="{{ section.id }}">
                                <div class="flex flex-row">
                                  <button class="bh-button bh-button--sm bh-button--white" name="minus" type="button">
                                    <span class="hidden">
                                      {{ 'products.product.quantity.decrease' | t: product: item.product.title | escape }}
                                    </span>
                                    <span class="bh-icon bh-icon--black">{% render 'icon-minus' %}</span>
                                  </button>
                                  <input
                                    class="bh-input bh-input--sm max-w-14"
                                    id="quantity-{{ item.index | plus: 1 }}"
                                    data-index="{{ item.index | plus: 1 }}"
                                    data-cart-quantity="{{ cart | item_count_for_variant: item.variant.id }}"
                                    data-quantity-variant-id="{{ item.variant.id }}"
                                    id="quantity-{{ section.id }}"
                                    name="updates[]"
                                    value="{{ item.quantity }}"
                                    {% # theme-check-disable %}
                                    min="{{ item.variant.quantity_rule.min }}"
                                    {% if item.variant.quantity_rule.max != null %}
                                      max="{{ item.variant.quantity_rule.max }}"
                                    {% endif %}
                                    step="{{ item.variant.quantity_rule.increment }}"
                                    {% # theme-check-enable %}
                                    aria-label=""
                                    type="number"
                                  >
                                  <button class="bh-button bh-button--white bh-button--sm border-b-gray-700" name="plus" type="button">
                                    <span class="hidden">
                                      {{ 'products.product.quantity.increase' | t: product: item.product.title | escape }}
                                    </span>
                                    <span class="bh-icon bh-button--white border-bg-gray-700">
                                      <span class="bh-icon bh-icon--black">
                                        {% render 'icon-add' %}
                                      </span>
                                    </span>
                                  </button>
                                </div>
                              </quantity-input>
                              <cart-remove-button id="" data-index="">
                                <a href="{{ item.url_to_remove }}" class="bh-icon bh-icon--black hover:bh-icon--gray">
                                  {% render 'icon-delete' %}
                                </a>
                              </cart-remove-button>
                            </div>
                          </div>
                          {% if has_qty_rules or has_vol_pricing %}
                            <button class="bh-button bh-button--sm bh-button--white" type="button" aria-expanded="false">
                              <span class="bh-icon bh-icon--gray">
                                {% render 'icon-info' %}
                              </span>
                              <span>
                                {% if has_vol_pricing %}
                                  {{ 'products.product.volume_pricing.note' | t }}
                                {% elsif has_qty_rules %}
                                  {{ 'products.product.quantity.note' | t }}
                                {% endif %}
                              </span>
                            </button>
                          {% endif %}
                          {% if has_vol_pricing or has_qty_rules %}
                            <div class="hidden" tabindex="-1">
                              {% if has_qty_rules == false %}
                                <span class="">
                                  {{ 'products.product.volume_pricing.title' | t }}
                                </span>
                              {% endif %}
                              <div class="">
                                {% if item.variant.quantity_rule.increment > 1 %}
                                  <span class="">
                                    {{
                                      'products.product.quantity.multiples_of'
                                      | t: quantity: item.variant.quantity_rule.increment
                                    }}
                                  </span>
                                {% endif %}
                                {% if item.variant.quantity_rule.min > 1 %}
                                  <span class="">
                                    {{
                                      'products.product.quantity.minimum_of'
                                      | t: quantity: item.variant.quantity_rule.min
                                    }}
                                  </span>
                                {% endif %}
                                {% if item.variant.quantity_rule.max != null -%}
                                  <span class="divider">
                                    {{
                                      'products.product.quantity.maximum_of'
                                      | t: quantity: item.variant.quantity_rule.max
                                    }}
                                  </span>
                                {% endif %}
                              </div>
                              <button class="bh-button--sm" type="button">
                                {% render 'icon-close' %}
                              </button>
                              {% if item.variant.quantity_price_breaks.size > 0 %}
                                <volume-pricing class="">
                                  <ul class="list-unstyled">
                                    <li>
                                      <span>{{ item.variant.quantity_rule.min }}+</span>
                                      {% assign price = item.variant.price | money_with_currency %}
                                      {% comment %} <span> {{ 'sections.quick_order_list.each' | t: money: price }}</span> {% endcomment %}
                                    </li>
                                    {% for price_break in item.variant.quantity_price_breaks %}
                                      <li>
                                        <span>
                                          {{ price_break.minimum_quantity }}
                                          <span aria-hidden="true">+</span></span
                                        >
                                        {% assign price = price_break.price | money_with_currency %}
                                        {% comment %} <span> {{ 'sections.quick_order_list.each' | t: money: price }}</span> {% endcomment %}
                                      </li>
                                    {% endfor %}
                                  </ul>
                                </volume-pricing>
                              {% endif %}
                            </div>
                          {% endif %}
                          <div class="" role="alert">
                            {% comment %}
                              <svg
                                aria-hidden="true"
                                focusable="false"
                                class=""
                                viewBox="0 0 13 13"
                              >
                                <circle cx="6.5" cy="6.50049" r="5.5" stroke="white" stroke-width="2"/>
                                <circle cx="6.5" cy="6.5" r="5.5" fill="#EB001B" stroke="#EB001B" stroke-width="0.7"/>
                                <path d="M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z" fill="white"/>
                                <path d="M5.87413 3.17832H5.51535L5.52424 3.537L5.6245 7.58083L5.63296 7.92216H5.97439H7.02713H7.36856L7.37702 7.58083L7.47728 3.537L7.48617 3.17832H7.12739H5.87413ZM6.50076 10.0109C7.06121 10.0109 7.5317 9.57872 7.5317 9.00504C7.5317 8.43137 7.06121 7.99918 6.50076 7.99918C5.94031 7.99918 5.46982 8.43137 5.46982 9.00504C5.46982 9.57872 5.94031 10.0109 6.50076 10.0109Z" fill="white" stroke="#EB001B" stroke-width="0.7">
                              </svg>
                            {% endcomment %}
                          </div>
                        </quantity-popover>
                        <!-- @todo: Quantity -->
                      </td>

                      <td class="">
                        <span class="bh-icon--gray animate-spin">
                          {% render icon-loading-spinner %}
                        </span>
                        <div class="">
                          {% if item.original_line_price != item.final_line_price %}
                            <dl class="">
                              <dt class="">
                                {{ 'products.product.price.regular_price' | t }}
                              </dt>
                              <dd>
                                <s class="">
                                  {{ item.original_line_price | money }}
                                </s>
                              </dd>
                              <dt class="">
                                {{ 'products.product.price.sale_price' | t }}
                              </dt>
                              <dd class="price price--end">
                                {{ item.final_line_price | money }}
                              </dd>
                            </dl>
                          {% else %}
                            <span class="">
                              {{ item.original_line_price | money }}
                            </span>
                          {% endif %}

                          {% if item.variant.available and item.unit_price_measurement %}
                            <div class="">
                              <span class="">
                                {{ 'products.product.price.unit_price' | t }}
                              </span>
                              {{ item.unit_price | money }}
                              <span aria-hidden="true">/</span>
                              {% comment %} <span class="">&nbsp;{{ 'accessibility.unit_price_separator' | t }}&nbsp;</span> {% endcomment %}
                              {% if item.unit_price_measurement.reference_value != 1 %}
                                {{ item.unit_price_measurement.reference_value }}
                              {% endif %}
                              {{ item.unit_price_measurement.reference_unit }}
                            </div>
                          {% endif %}
                        </div>
                      </td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            {% endif %}
          </div>
        </div>

      </form>

    </cart-items>
  </section>
</div>

{% schema %}
{
  "name": "Page Main Cart Items",
  "settings": []
}
{% endschema %}
