<aside class="bh-collection"> 
  <!-- Page Heading -->
  <div class="flex flex-col bh-bg__heat-sink--dark">
    {% if section.settings.show_all_products_link %}
      <div class="bh-collections__all-products pt-4 pl-4 md:px-20 md:pt-4">
        <a class="flex " href="{{ routes.collections_url }}">
          <span class="bh-icon fill-red-500">
            {% render 'icon-arrow-back' %}
          </span>&nbsp;
          <span class="text-red-500 underline cursor-pointer hover:text-red-400">
            {{ 'collections.all_products' | t }}
          </span>
        </a>
      </div>
    {% endif %}
    <div class="py-4 pl-4 md:px-20">
      <h2 class="text-white" style="margin-bottom: 0px; margin-top: 0px;">
        {{ collection.title }}
      </h2>
      {% if section.settings.collection_description_enable %}
        {% if section.settings.collection_description != blank %}
          <p class="text-white md:text-xl font-thin">
            {{ section.settings.collection_description }}
          </p>
        {% endif %}
      {% endif %}
    </div>
  </div>

  {% if section.settings.collection_overview_enable %}
    <div class="bg-gray-100">
      {% render 'amplifiers-overview', class_name: 'bh-box--non-full' %}
    </div>
  {% endif %}

  <div class="bh-box--non-full">
    <div class="hidden bh-collection__filters flex justify-between bg-wite h-10">
      <code>PRICE</code>
      <code>SORTYBY</code>
    </div>
  
    <div class="bh-collection__list border-b-2 bg-white">
      {% paginate collection.products by section.settings.number_of_products_per_page %}
        <div class="mx-auto">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            {% for product in collection.products %}
              {% render 'card-product', 
                card_product: product,
                show_rating: section.settings.show_rating,
                section_id: section.id
              %}
            {% else %}
              <p>{{ 'collections.no_products' | t }}</p>
            {% endfor %}
          </div>
        </div>
  
        {% render 'pagination', pagination: paginate %}
      {% endpaginate %}
    </div>
  </div>
</aside>

{% schema %}
{
  "name": "Main Collection",
  "tag": "section",
  "class": "bh-main__page__section--full",
  "blocks": [],
  "settings": [
    {
      "default": 6,
      "label": "Number of products per page",
      "id": "number_of_products_per_page",
      "type": "number"
    },
    {
      "type": "inline_richtext",
      "id": "collection_description",
      "default": "Experience Exceptional & Affordable Power Amplifiers â€“ Invest in Quality and Preserve Your Integrity",
      "label": "Collection description"
    },
    {
      "type": "checkbox",
      "id": "collection_description_enable",
      "default": true,
      "label": "Show collection description"
    },
    {
      "type": "checkbox",
      "id": "collection_overview_enable",
      "default": true,
      "label": "Show collection overview"
    },
    {
      "type": "checkbox",
      "id": "show_rating",
      "default": false,
      "label": "Show product rating",
      "info": "To rating for a collection, add a product rating app. [Learn more](https://help.shopify.com/manual/online-store/themes/theme-structure/theme-features#featured-collection-show-product-rating)"
    },
    {
      "type": "checkbox",
      "id": "show_all_products_link",
      "default": false,
      "label": "Show all products breadcrumb link",
      "info": "This takes you back to main collection page.  Useful if we sell collections that are not power amplifiers, e.g., tube amps"
    }
  ]
}
{% endschema %}
